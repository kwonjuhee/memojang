## Hierarchy Tree

- íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ì˜ ëª¨ë“  íƒ€ì…ì€ **ê³„ì¸µ êµ¬ì¡°**ë¡œ ì´ë£¨ì–´ì ¸ìˆë‹¤. ë¶€ëª¨ íƒ€ì…ì„ **ìƒìœ„ íƒ€ì…(super type)**, ìì‹ íƒ€ì…ì„ **í•˜ìœ„ íƒ€ì…(sub type)** ì´ë¼ í•œë‹¤.
- ìƒì†ì²˜ëŸ¼ `is-a` ê´€ê³„ë¥¼ í˜•ì„±í•œë‹¤.
- super typeì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ í”„ë¡œê·¸ë¨ ë³€ê²½ ì—†ì´ sub typeì˜ ì¸ìŠ¤í„´ìŠ¤ë¡œ ëŒ€ì²´í•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤.
ë°˜ëŒ€ëŠ” ì•ˆë¨
  - ì˜ˆë¥¼ ë“¤ë©´ "`Car` is `Vehicle`" ê´€ê³„ì—ì„œ, `Vehicle` (ìƒìœ„ íƒ€ì…)ì€ `Cars`(í•˜ìœ„ íƒ€ì…)ìœ¼ë¡œ ëŒ€ì²´ ê°€ëŠ¥í•˜ë‹¤. 

## nominal vs. structural typing

### nominal typing

- ëŒ€ë¶€ë¶„ì˜ ì£¼ë¥˜ statically-typed ì–¸ì–´ì—ì„œ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ (ex. Java)
- ì–´ë–¤ íƒ€ì…ì´ ë‹¤ë¥¸ íƒ€ì…ì˜ í•˜ìœ„ íƒ€ì…ì„ì„ *ëª…ì‹œì ìœ¼ë¡œ* ì„ ì–¸í•´ì•¼ í•œë‹¤. `class Foo extends Bar`

### structural typing

- íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ê°€ ì‚¬ìš©í•˜ëŠ” ë°©ì‹
- ì½”ë“œì—ì„œ íƒ€ì… ê´€ê³„ë¥¼ ëª…ì‹œì ìœ¼ë¡œ ì„ ì–¸í•  í•„ìš”ê°€ ì—†ë‹¤.
- íƒ€ì…ì˜ ì§‘í•©ì„ í¬í•¨í•˜ëŠ”ì§€ í™•ì¸
  - `Foo` íƒ€ì…ì´ `Bar` íƒ€ì…ì˜ ëª¨ë“  ë©¤ë²„ë¥¼ í¬í•¨í•œë‹¤ë©´ `Foo` íƒ€ì…ì€ `Bar` íƒ€ì…ì˜ í•˜ìœ„ íƒ€ì…ì´ë‹¤.  (`Foo`ê°€ ì¶”ê°€ì ì¸ ë©¤ë²„ë¥¼ ê°–ëŠ”ë‹¤ í•˜ë”ë¼ë„)
- ì–´ë–¤ íƒ€ì…ì´ ë” ì—„ê²©í•œì§€ í™•ì¸
  - ì˜ˆë¥¼ ë“¤ì–´, `{ name: string, age: number }` íƒ€ì…ì€ `{ name: string }` íƒ€ì…ë³´ë‹¤ ë” ì—„ê²©í•˜ë‹¤. ë” ë§ì€ ë©¤ë²„ë¥¼ í•„ìš”ë¡œ í•˜ê¸° ë•Œë¬¸.
  - ê·¸ëŸ¬ë¯€ë¡œ ë” ì—„ê²©í•œ `{ name: string, age: number }` íƒ€ì…ì€ `{ name: string }` íƒ€ì…ì˜ sub typeì´ë‹¤. 

## í• ë‹¹ ê°€ëŠ¥ì„±ì„ ì²´í¬í•˜ëŠ” ë‘ ê°€ì§€ ë°©ë²•

- type cast

- `extends` í‚¤ì›Œë“œ

```tsx
type A = string extends unknown? true : false;  // true
type B = unknown extends string? true : false; // false
```

## the top of the tree

- ëª¨ë“  íƒ€ì…ì˜ ìƒìœ„ íƒ€ì…ì¸ ë‘ ê°€ì§€ íƒ€ì… => `any`ì™€ `unknown`
- ì–´ë–¤ íƒ€ì…ì˜ ì–´ë–¤ ê°’ì´ë¼ë„ í• ë‹¹ì„ í—ˆìš©í•œë‹¤.

## upcast & downcast

<img src="https://user-images.githubusercontent.com/62097867/222366711-3a629688-0c66-43f5-b716-3da136bbf847.png" width="600px">

### ì—…ìºìŠ¤íŠ¸ (upcast)

- í•˜ìœ„ íƒ€ì…ì„ ìƒìœ„ íƒ€ì…ì— í• ë‹¹í•˜ëŠ” ê²ƒ
- ì—…ìºìŠ¤íŠ¸ëŠ” ì•ˆì „í•˜ë¯€ë¡œ ì•”ë¬µì ìœ¼ë¡œ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤.
- ì˜ˆë¥¼ ë“¤ë©´ ëª¨ë“  string íƒ€ì…ì€ any íƒ€ì…ê³¼ unknown íƒ€ì…ì˜ ì„œë¸Œíƒ€ì…ì´ë¯€ë¡œ ë‹¤ìŒê³¼ ê°™ì´ í• ë‹¹í•  ìˆ˜ ìˆë‹¤.

```tsx
let string: string = 'foo'
let any: any = string // âœ… â¬†ï¸upcast
let unknown: unknown = string // âœ… â¬†ï¸upcast
```

### ë‹¤ìš´ìºìŠ¤íŠ¸(downcast)

- ì—…ìºìŠ¤íŠ¸ì™€ ë°˜ëŒ€ë¡œ ìƒìœ„íƒ€ì…ì„ í•˜ìœ„íƒ€ì…ì— í• ë‹¹í•˜ëŠ” ê²ƒ
- upcastì™€ ë°˜ëŒ€ë¡œ downcastëŠ” ì•ˆì „í•˜ì§€ ì•Šê³  ëŒ€ë¶€ë¶„ì˜ strongly typed ì–¸ì–´ëŠ” ì´ê²ƒì„ ìë™ìœ¼ë¡œ í—ˆìš©í•˜ì§€ ì•ŠëŠ”ë‹¤.
- unknown íƒ€ì…ì„ string íƒ€ì…ì— í• ë‹¹í•˜ë©´ íƒ€ì… ì—ëŸ¬ê°€ ë°œìƒí•˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ì—†ë‹¤. ë‹¤ìš´ìºìŠ¤íŠ¸ëŠ” ëª…ì‹œì ìœ¼ë¡œ íƒ€ì… ê²€ì‚¬ê¸°ë¥¼ ìš°íšŒí•˜ì§€ ì•Šê³  ìˆ˜í–‰ë  ìˆ˜ ì—†ê¸° ë•Œë¬¸ì´ë‹¤.

```tsx
let any: any
let unknown: unknown
let stringA: string = any // âœ… â¬‡ï¸downcast - it is allowed because `any` is different..
let stringB: string = unknown // âŒ â¬‡ï¸downcast
```

ğŸ’¡ í•˜ì§€ë§Œ anyëŠ” ì˜ˆì™¸ë‹¤. any íƒ€ì…ì„ ë‹¤ìš´ìºìŠ¤íŠ¸í•˜ëŠ” ê²ƒì€ í—ˆìš©ëœë‹¤.

- anyëŠ” íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ìë°”ìŠ¤í¬ë¦½íŠ¸ ì„¸ê³„ë¡œ íƒˆì¶œí•˜ëŠ” backdoor ì—­í• ì„ í•˜ê¸° ìœ„í•´ ì¡´ì¬í•œë‹¤. ìë°”ìŠ¤í¬ë¦½íŠ¸ì˜ ìœ ì—°ì„±ì„ ë°˜ì˜í•˜ëŠ” ê²ƒ
- ëŸ°íƒ€ì„ ì–¸ì–´ëŠ” ì—¬ì „íˆ ìë°”ìŠ¤í¬ë¦½íŠ¸ì´ê¸° ë•Œë¬¸

## the bottom of the tree

`never` íƒ€ì…ì€ top types(any, unknown)ì˜ ë°˜ëŒ€ íƒ€ì…ì²˜ëŸ¼ ë™ì‘í•œë‹¤. ëª¨ë“  íƒ€ì…ì˜ í•˜ìœ„ íƒ€ì…ì´ê¸° ë•Œë¬¸ì— anyë¥¼ í¬í•¨í•´ì„œ ì–´ë– í•œ ê°’ë„ í—ˆìš©í•˜ì§€ ì•ŠëŠ”ë‹¤.

**ì ˆëŒ€ ë°˜í™˜ë˜ì§€ ì•ŠëŠ” í•¨ìˆ˜**ì—ì„œ ë°˜í™˜ ê°’ì— íƒ€ì…ì„ ì§€ì •í•˜ëŠ” ê²½ìš°ì— ì‚¬ìš©í•œë‹¤.
- í•­ìƒ ì˜ˆì™¸ë¥¼ ë˜ì§€ëŠ” ê²½ìš°
- í”„ë¡œê·¸ë¨ì´ ì¢…ë£Œë  ë•Œê¹Œì§€ ë¬´í•œ ë£¨í”„ë¥¼ ë„ëŠ” ê²½ìš° (ì´ë²¤íŠ¸ ë£¨í”„ê°™ì€)

```tsx
function fnThatNeverReturns(): never {
	throw 'It never returns'
}

const number: number = fnThatNeverReturns() // âœ… â¬†ï¸upcast
```

ğŸ’¡ never íƒ€ì…ì´ ì—…ìºìŠ¤íŠ¸ê°€ ê°€ëŠ¥í•œ ì´ìœ 

- ê¸°ìˆ ì ìœ¼ë¡œ ë¶ˆê°€ëŠ¥í•˜ê¸° ë•Œë¬¸ì— í—ˆìš©í•œë‹¤.
  - íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ëŠ” never íƒ€ì…ì„ empty typeìœ¼ë¡œ ë§Œë“ ë‹¤.
  - **ëŸ°íƒ€ì„ì— ì‹¤ì œ ê°’ì„ ê°€ì§ˆ ìˆ˜ ì—†ê³ **, í”„ë¡œí¼í‹°ì— ì ‘ê·¼í•˜ëŠ” ë“± íƒ€ì…ì— ëŒ€í•´ ì•„ë¬´ê²ƒë„ í•  ìˆ˜ ì—†ëŠ” íƒ€ì…
- ì»´íŒŒì¼ëŸ¬ê°€ í•¨ìˆ˜ê°€ ì ˆëŒ€ ë¦¬í„´í•˜ì§€ ì•Šê³  number ë³€ìˆ˜ì— ì•„ë¬´ê²ƒë„ í• ë‹¹ë˜ì§€ ì•Šì„ ê²ƒì´ë¼ëŠ” ê±¸ ì•Œê¸° ë•Œë¬¸ì´ë‹¤.
- íƒ€ì…ì€ ëŸ°íƒ€ì„ì‹œ ë°ì´í„°ê°€ ì˜¬ë°”ë¥¸ì§€ ë³´ì¥í•˜ê¸° ìœ„í•´ ì¡´ì¬í•œë‹¤. í• ë‹¹ì´ ì‹¤ì œë¡œ ëŸ°íƒ€ì„ì— ì ˆëŒ€ ì¼ì–´ë‚˜ì§€ ì•ŠëŠ”ë‹¤ë©´ ì»´íŒŒì¼ëŸ¬ëŠ” íƒ€ì…ì´ ì¤‘ìš”í•˜ì§€ ì•Šë‹¤ëŠ” ê²ƒì„ ì•Œê³  ìˆë‹¤.

## types in between

- string literal type
  - `let stringLiteral: 'hello' = 'hello'`ê³¼ ê°™ì€ ë¬¸ìì—´ ë¦¬í„°ëŸ´ íƒ€ì…ì€ `string`íƒ€ì…ìœ¼ë¡œ ì—…ìºìŠ¤íŠ¸ë  ìˆ˜ ìˆë‹¤.
- object
```tsx
type UserWithEmail = {name: string, email: string}
type UserWithoutEmail = {name: string}

type A = UserWithEmail extends UserWithoutEmail ? true : false // true âœ… â¬†ï¸upcast
```
- empty object
```tsx
const emptyObject: {} = {foo: 'bar'} // âœ… â¬†ï¸upcast 
```

### void

voidëŠ” íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ì—ì„œ undefinedì˜ ìƒìœ„ íƒ€ì…ì´ë‹¤.

í•¨ìˆ˜ êµ¬í˜„ìì˜ **ë¦¬í„´ íƒ€ì…ì„ ë³´ì¥í•˜ì§€ ì•ŠìŒ** ë‚˜íƒ€ë‚¼ ë•Œ ì‚¬ìš©ëœë‹¤.

void í•¨ìˆ˜ê°€ ëŸ°íƒ€ì„ì— undefined ì´ì™¸ì˜ ê²ƒì„ ë°˜í™˜í•  ìˆ˜ ìˆì§€ë§Œ **ë°˜í™˜ ê°’ì´ í˜¸ì¶œìì— ì˜í•´ ì‚¬ìš©ë˜ì–´ì„œëŠ” ì•ˆëœë‹¤**ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤.

```tsx
function fn(cb: () => void): void {
    return cb()
}

fn(() => 'string')
```

ğŸ’¡  string íƒ€ì…ì´ void íƒ€ì…ìœ¼ë¡œ ëŒ€ì²´ ë¶ˆê°€ëŠ¥í•œë° ìœ„ì˜ ì˜ˆì œê°€ ê°€ëŠ¥í•œ ì´ìœ 

- í•˜ì§€ë§Œ í”„ë¡œê·¸ë¨ì˜ ì •í™•ì„±ì„ ë³€ê²½í•˜ëŠ”ì§€ì— ëŒ€í•œ ê´€ì ì—ì„œ ë³¸ë‹¤ë©´ caller í•¨ìˆ˜ê°€ ë¦¬í„´ ê°’ì„ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ì´ìƒ ë‹¤ë¥¸ ê²ƒì„ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ë¡œ ëŒ€ì²´ë˜ì–´ë„ ë¬´í•´í•˜ë‹¤.
- ìë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œëŠ” ë¦¬í„´ ê°’ì´ ë¬´ì‹œë˜ëŠ” ìƒí™©ì—ì„œ í•¨ìˆ˜ê°€ ì¬ì‚¬ìš©ë˜ëŠ” ê²½ìš°ê°€ ê½¤ í”í•˜ê¸° ë•Œë¬¸ì— ì´ëŸ° ì ì„ íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ê°€ ë³´ì™„í•˜ë ¤ê³  í•˜ëŠ” ê²ƒ

ğŸ’¡ thisë¥¼ void íƒ€ì…ìœ¼ë¡œ ì§€ì •í•˜ê¸°

- í•¨ìˆ˜ ë‚´ì—ì„œ thisë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ë§‰ì„ ìˆ˜ ìˆë‹¤.

```tsx
function doSomething(this: void, value: string) {
    this // void
}
```

ğŸ’¡ voidëŠ” ìë°”ìŠ¤í¬ë¦½íŠ¸ ì—°ì‚°ìì´ê¸°ë„ í•˜ë‹¤. ë‹¤ìŒì— ë‚˜ì˜¤ëŠ” í‘œí˜„ì‹ì„ undefinedë¡œ í‰ê°€í•œë‹¤. e.g. `void 2 === undefined // true.`

## íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ê°€ implicit upcastë¥¼ í—ˆìš©í•˜ì§€ ì•ŠëŠ” ê²½ìš° (ì‰ì—¬ ì†ì„± ì²´í¬)

- ë¦¬í„°ëŸ´ ê°ì²´ë¥¼ í•¨ìˆ˜ì— ì§ì ‘ ì „ë‹¬í•˜ëŠ” ê²½ìš°

```tsx
function fn(obj: {name: string}) {}

fn({name: 'foo', key: 1}) // âŒ Object literal may only specify known properties, and 'key' does not exist in type '{ name: string; }'
```

- ë¦¬í„°ëŸ´ ê°ì²´ë¥¼ ëª…ì‹œì ì¸ íƒ€ì…ì„ ê°€ì§„ ë³€ìˆ˜ì— ì§ì ‘ í• ë‹¹í•˜ëŠ” ê²½ìš°

```tsx
type UserWithEmail = {name: string, email: string}
type UserWithoutEmail = {name: string}

let userB: UserWithoutEmail = {name: 'foo', email: 'foo@gmail.com'} // âŒ Type '{ name: string; email: string; }' is not assignable to type 'UserWithoutEmail'.
```

https://www.zhenghao.io/posts/type-hierarchy-tree
